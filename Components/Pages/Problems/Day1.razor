@page "/Day1"
@using System.Text
@inherits ProblemBaseComponent<string, string>

<h3>Day1</h3>

<h5>Answer (A): @answerA</h5>
<h5>Answer (B): @answerB</h5>

@code {
    private int answerA = 0;
    private int answerB = 0;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        var text = @"";
        answerA = DoPartA(text);
        answerB = DoPartB(text);
    }

    private int DoPartA(string text)
    {
        int answer = 0;
        List<string> lines = text.Split("\r\n").ToList();
        foreach (var line in lines)
        {
            if (!string.IsNullOrEmpty(line))
            {
                List<char> numbers = line.Where<char>(c => new List<char> { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' }.Contains(c)).ToList();
                char[] calibrationValues = [numbers.First(), numbers.Last()];
                answer += Int32.Parse(new string(calibrationValues));
            }
        }
        return answer;
    }

    private int DoPartB(string text)
    {
        List<string> lines = text.Split("\r\n").ToList();
        string newText = "";
        foreach (var line in lines)
        {
            if (!string.IsNullOrEmpty(line))
            {
                string updatedLine = "";
                for (int i = 0; i < line.Length; i++)
                {
                    string x = line.Substring(i);
                    if (x.StartsWith("zero"))
                    {
                        updatedLine += "0";
                    }
                    else if (x.StartsWith("one"))
                    {
                        updatedLine += "1";
                    }
                    else if (x.StartsWith("two"))
                    {
                        updatedLine += "2";
                    }
                    else if (x.StartsWith("three"))
                    {
                        updatedLine += "3";
                    }
                    else if (x.StartsWith("four"))
                    {
                        updatedLine += "4";
                    }
                    else if (x.StartsWith("five"))
                    {
                        updatedLine += "5";
                    }
                    else if (x.StartsWith("six"))
                    {
                        updatedLine += "6";
                    }
                    else if (x.StartsWith("seven"))
                    {
                        updatedLine += "7";
                    }
                    else if (x.StartsWith("eight"))
                    {
                        updatedLine += "8";
                    }
                    else if (x.StartsWith("nine"))
                    {
                        updatedLine += "9";
                    }
                    else
                    {
                        updatedLine += line[i];
                    }
                }
                newText += updatedLine + "\r\n";
            }
        }

        return DoPartA(newText);
    }
}
